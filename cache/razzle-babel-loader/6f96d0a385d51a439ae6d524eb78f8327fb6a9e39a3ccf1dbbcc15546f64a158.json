{"ast":null,"code":"import _regeneratorRuntime from \"/Users/aidandouglas/code/AidanFournier/ratatouille/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _toConsumableArray from \"/Users/aidandouglas/code/AidanFournier/ratatouille/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/Users/aidandouglas/code/AidanFournier/ratatouille/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { LocaleCode, ordered as orderedLocales } from '@tablecheck/locales';\nimport i18next from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\nimport en from './locales/en.json';\nvar SUPPORTED_LOCALES = orderedLocales.map(_c = function _c(_ref) {\n  var code = _ref.code;\n  return code;\n});\n_c2 = SUPPORTED_LOCALES;\nvar DEFAULT_LOCALE = LocaleCode.English;\ni18next.use(initReactI18next).use(LanguageDetector).use({\n  type: 'backend',\n  read: function read(language, namespace, callback) {\n    import(\"./locales/\".concat(language, \".json\")).then(function (resources) {\n      // eslint-disable-next-line promise/no-callback-in-promise\n      callback(null, resources);\n    })[\"catch\"](function (error) {\n      // eslint-disable-next-line promise/no-callback-in-promise\n      callback(error, null);\n    });\n  }\n});\nexport function initI18n() {\n  return _initI18n.apply(this, arguments);\n}\nfunction _initI18n() {\n  _initI18n = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (i18next.isInitialized) {\n              _context.next = 3;\n              break;\n            }\n            _context.next = 3;\n            return i18next.init({\n              resources: {\n                en: {\n                  translations: en\n                }\n              },\n              partialBundledLanguages: true,\n              fallbackLng: DEFAULT_LOCALE,\n              supportedLngs: _toConsumableArray(SUPPORTED_LOCALES),\n              ns: ['translations'],\n              defaultNS: 'translations',\n              debug: CONFIG.isDevelopment,\n              interpolation: {\n                escapeValue: false // not needed for react!!\n              },\n\n              react: {\n                useSuspense: false\n              }\n            });\n          case 3:\n            return _context.abrupt(\"return\", i18next);\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _initI18n.apply(this, arguments);\n}\nexport function getI18nextInstance() {\n  if (!i18next.isInitialized) throw new Error(\"i18next hasn't been initialized yet\");\n  return i18next;\n}\nvar _c, _c2;\n$RefreshReg$(_c, \"SUPPORTED_LOCALES$orderedLocales.map\");\n$RefreshReg$(_c2, \"SUPPORTED_LOCALES\");","map":{"version":3,"names":["LocaleCode","ordered","orderedLocales","i18next","LanguageDetector","initReactI18next","en","SUPPORTED_LOCALES","map","code","DEFAULT_LOCALE","English","use","type","read","language","namespace","callback","then","resources","error","initI18n","isInitialized","init","translations","partialBundledLanguages","fallbackLng","supportedLngs","ns","defaultNS","debug","CONFIG","isDevelopment","interpolation","escapeValue","react","useSuspense","getI18nextInstance","Error"],"sources":["/Users/aidandouglas/code/AidanFournier/ratatouille/src/i18n/index.ts"],"sourcesContent":["import { LocaleCode, ordered as orderedLocales } from '@tablecheck/locales';\nimport i18next from 'i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from 'react-i18next';\nimport en from './locales/en.json';\n\nconst SUPPORTED_LOCALES = orderedLocales.map(({ code }) => code);\nconst DEFAULT_LOCALE = LocaleCode.English;\n\ni18next\n  .use(initReactI18next)\n  .use(LanguageDetector)\n  .use({\n    type: 'backend',\n    read<Namespace extends keyof typeof en>(\n      language: LocaleCode,\n      namespace: Namespace,\n      callback: (\n        errorValue: unknown,\n        translations: null | typeof en[Namespace]\n      ) => void\n    ) {\n      import(`./locales/${language}.json`)\n        .then((resources) => {\n          // eslint-disable-next-line promise/no-callback-in-promise\n          callback(null, resources);\n        })\n        .catch((error) => {\n          // eslint-disable-next-line promise/no-callback-in-promise\n          callback(error, null);\n        });\n    }\n  });\n\nexport async function initI18n(): Promise<typeof i18next> {\n  if (!i18next.isInitialized) {\n    await i18next.init({\n      resources: { en: { translations: en } },\n      partialBundledLanguages: true,\n      fallbackLng: DEFAULT_LOCALE,\n      supportedLngs: [...SUPPORTED_LOCALES],\n      ns: ['translations'],\n      defaultNS: 'translations',\n      debug: CONFIG.isDevelopment,\n      interpolation: {\n        escapeValue: false // not needed for react!!\n      },\n      react: {\n        useSuspense: false\n      }\n    });\n  }\n\n  return i18next;\n}\n\nexport function getI18nextInstance(): typeof i18next {\n  if (!i18next.isInitialized)\n    throw new Error(\"i18next hasn't been initialized yet\");\n  return i18next;\n}\n"],"mappings":";;;AAAA,SAASA,UAAU,EAAEC,OAAO,IAAIC,cAAc,QAAQ,qBAAqB;AAC3E,OAAOC,OAAO,MAAM,SAAS;AAC7B,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,SAASC,gBAAgB,QAAQ,eAAe;AAChD,OAAOC,EAAE,MAAM,mBAAmB;AAElC,IAAMC,iBAAiB,GAAGL,cAAc,CAACM,GAAG,MAAC;EAAA,IAAGC,IAAI,QAAJA,IAAI;EAAA,OAAOA,IAAI;AAAA,EAAC;AAAC,MAA3DF,iBAAiB;AACvB,IAAMG,cAAc,GAAGV,UAAU,CAACW,OAAO;AAEzCR,OAAO,CACJS,GAAG,CAACP,gBAAgB,CAAC,CACrBO,GAAG,CAACR,gBAAgB,CAAC,CACrBQ,GAAG,CAAC;EACHC,IAAI,EAAE,SAAS;EACfC,IAAI,gBACFC,QAAoB,EACpBC,SAAoB,EACpBC,QAGS,EACT;IACA,MAAM,qBAAcF,QAAQ,WAAQ,CACjCG,IAAI,CAAC,UAACC,SAAS,EAAK;MACnB;MACAF,QAAQ,CAAC,IAAI,EAAEE,SAAS,CAAC;IAC3B,CAAC,CAAC,SACI,CAAC,UAACC,KAAK,EAAK;MAChB;MACAH,QAAQ,CAACG,KAAK,EAAE,IAAI,CAAC;IACvB,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEJ,gBAAsBC,QAAQ;EAAA;AAAA;AAoB7B;EAAA,uEApBM;IAAA;MAAA;QAAA;UAAA;YAAA,IACAlB,OAAO,CAACmB,aAAa;cAAA;cAAA;YAAA;YAAA;YAAA,OAClBnB,OAAO,CAACoB,IAAI,CAAC;cACjBJ,SAAS,EAAE;gBAAEb,EAAE,EAAE;kBAAEkB,YAAY,EAAElB;gBAAG;cAAE,CAAC;cACvCmB,uBAAuB,EAAE,IAAI;cAC7BC,WAAW,EAAEhB,cAAc;cAC3BiB,aAAa,qBAAMpB,iBAAiB,CAAC;cACrCqB,EAAE,EAAE,CAAC,cAAc,CAAC;cACpBC,SAAS,EAAE,cAAc;cACzBC,KAAK,EAAEC,MAAM,CAACC,aAAa;cAC3BC,aAAa,EAAE;gBACbC,WAAW,EAAE,KAAK,CAAC;cACrB,CAAC;;cACDC,KAAK,EAAE;gBACLC,WAAW,EAAE;cACf;YACF,CAAC,CAAC;UAAA;YAAA,iCAGGjC,OAAO;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACf;EAAA;AAAA;AAED,OAAO,SAASkC,kBAAkB,GAAmB;EACnD,IAAI,CAAClC,OAAO,CAACmB,aAAa,EACxB,MAAM,IAAIgB,KAAK,CAAC,qCAAqC,CAAC;EACxD,OAAOnC,OAAO;AAChB;AAAC;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}