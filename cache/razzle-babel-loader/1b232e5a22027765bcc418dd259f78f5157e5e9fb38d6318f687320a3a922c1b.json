{"ast":null,"code":"import _regeneratorRuntime from \"/Users/aidandouglas/code/AidanFournier/ratatouille/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/aidandouglas/code/AidanFournier/ratatouille/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/aidandouglas/code/AidanFournier/ratatouille/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/aidandouglas/code/AidanFournier/ratatouille/src/Pages/Home/index.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Helmet } from 'react-helmet';\nimport { useTranslation } from 'react-i18next';\nimport { Outlet, useNavigate, Link } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n// import { Form } from './Form';\nimport { HomeHeadline, HomeWrapper, HomeInput, HomeSearchButton, HomeDescription } from './styles';\nvar defaultCoords = {\n  lat: \"\",\n  \"long\": \"\"\n};\nexport function Home() {\n  _s();\n  var _useTranslation = useTranslation(),\n    _useTranslation2 = _slicedToArray(_useTranslation, 2),\n    t = _useTranslation2[0],\n    language = _useTranslation2[1].language;\n  var navigate = useNavigate();\n  var navigateToRestaurants = function navigateToRestaurants() {\n    navigate(\"/restaurants/\".concat(location), {\n      state: {\n        restaurants: restaurants\n      }\n    });\n  };\n  var _useState = useState(\"\"),\n    location = _useState[0],\n    setLocation = _useState[1];\n  var _useState2 = useState(defaultCoords),\n    coords = _useState2[0],\n    setCoords = _useState2[1];\n  var _useState3 = useState({}),\n    restaurants = _useState3[0],\n    setRestaurants = _useState3[1];\n  var urlCoords = \"https://staging-snap.tablecheck.com/v2/autocomplete?locale=en&shop_universe_id=57e0b91744aea12988000001&text=\".concat(location);\n  var urlShops = \"https://staging-snap.tablecheck.com/v2/shop_search?cuisines[]=kaiseki&geo_latitude=\".concat(coords.lat, \"&geo_longitude=\").concat(coords[\"long\"], \"&shop_universe_id=57e0b91744aea12988000001&locale=en&per_page=50\");\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n      var res, newCoords, resShops;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.get(urlCoords);\n            case 4:\n              res = _context.sent;\n              newCoords = {\n                lat: res.data.locations[0].payload.geo.lat.toString(),\n                \"long\": res.data.locations[0].payload.geo.lon.toString()\n              };\n              setCoords(newCoords);\n              _context.next = 9;\n              return axios.get(urlShops);\n            case 9:\n              resShops = _context.sent;\n              setRestaurants(resShops.data.shops);\n              _context.next = 16;\n              break;\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](1);\n              console.log('ðŸ‘¹ ERROR:' + _context.t0);\n            case 16:\n              ;\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 13]]);\n    }));\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    navigateToRestaurants();\n  }, [restaurants]);\n  var onChange = function onChange(e) {\n    setLocation(e.target.value);\n  };\n  return __jsx(HomeWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, __jsx(HomeHeadline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, \"Welcome to Ratatouille\"), __jsx(HomeDescription, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, \"We're the small, clever rat - we mean app - that will help you find a restaurant in a pinch. \"), __jsx(HomeDescription, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, \"Go from crumbs to a meal before you can say 'ratatouille'!\"), __jsx(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, __jsx(HomeInput, {\n    type: \"search\",\n    id: \"search\",\n    name: \"location\",\n    value: location,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), __jsx(HomeSearchButton, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"Search\")), __jsx(Link, {\n    to: \"/restaurants/:location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), __jsx(Outlet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), __jsx(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    lang: language,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, \"\".concat(t('attributes.titles.headline'), \" - \").concat(t('keywords.app_name')))));\n}\n_s(Home, \"ClI+wRMRL8SxiGwKBUI47OTJ+zU=\", false, function () {\n  return [useTranslation, useNavigate];\n});\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["Helmet","useTranslation","Outlet","useNavigate","Link","useState","useEffect","axios","HomeHeadline","HomeWrapper","HomeInput","HomeSearchButton","HomeDescription","defaultCoords","lat","Home","t","language","navigate","navigateToRestaurants","location","state","restaurants","setLocation","coords","setCoords","setRestaurants","urlCoords","urlShops","onSubmit","e","preventDefault","get","res","newCoords","data","locations","payload","geo","toString","lon","resShops","shops","console","log","onChange","target","value"],"sources":["/Users/aidandouglas/code/AidanFournier/ratatouille/src/Pages/Home/index.tsx"],"sourcesContent":["import { Helmet } from 'react-helmet';\nimport { useTranslation } from 'react-i18next';\nimport { Outlet, useNavigate, Navigate, Link } from 'react-router-dom';\nimport { useState, useEffect } from 'react'\nimport axios from 'axios';\n\n// import { Form } from './Form';\nimport { HomeHeadline, HomeWrapper, HomeInput, HomeSearchButton, HomeDescription } from './styles';\n\nconst defaultCoords = {\n  lat: \"\",\n  long: \"\"\n};\n\nexport function Home(): JSX.Element {\n  const [t, { language }] = useTranslation();\n  const navigate = useNavigate();\n\n  const navigateToRestaurants = () => {\n    navigate(`/restaurants/${location}`, {state: {restaurants} });\n  };\n\n  const [ location, setLocation ] = useState(\"\");\n  const [ coords, setCoords ] = useState(defaultCoords);\n  const [ restaurants, setRestaurants ] = useState({});\n\n  const urlCoords = `https://staging-snap.tablecheck.com/v2/autocomplete?locale=en&shop_universe_id=57e0b91744aea12988000001&text=${location}`;\n  const urlShops = `https://staging-snap.tablecheck.com/v2/shop_search?cuisines[]=kaiseki&geo_latitude=${coords.lat}&geo_longitude=${coords.long}&shop_universe_id=57e0b91744aea12988000001&locale=en&per_page=50`\n\n  const onSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    try { \n      const res = await axios.get(urlCoords);\n      const newCoords = { \n        lat: res.data.locations[0].payload.geo.lat.toString(),\n        long: res.data.locations[0].payload.geo.lon.toString()\n      };\n      setCoords(newCoords)\n      const resShops = await axios.get(urlShops);\n      setRestaurants(resShops.data.shops);\n      \n    } catch (err) {\n      console.log('ðŸ‘¹ ERROR:' + err)\n    };\n  };\n\n  useEffect(() => {\n    navigateToRestaurants();\n  }, [restaurants])\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setLocation((e.target.value));\n  };\n\n\n  return (\n    <HomeWrapper>\n      <HomeHeadline>Welcome to Ratatouille</HomeHeadline>\n      <HomeDescription>We're the small, clever rat - we mean app - that will help you find a restaurant in a pinch. </HomeDescription>\n      <HomeDescription>Go from crumbs to a meal before you can say 'ratatouille'!</HomeDescription>\n\n      <form onSubmit={onSubmit}>\n        <HomeInput type=\"search\" id=\"search\" name=\"location\" value={location} onChange={onChange} />\n        <br />\n          <HomeSearchButton type=\"submit\" >Search</HomeSearchButton>\n      </form>\n      <Link to='/restaurants/:location'></Link>\n\n\n      <Outlet />\n      <Helmet>\n        <title lang={language}>{`${t('attributes.titles.headline')} - ${t(\n          'keywords.app_name'\n        )}`}</title>\n      </Helmet>\n    </HomeWrapper>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}